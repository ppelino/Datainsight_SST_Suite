<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <title>DataInsight SST â€“ LTCAT / Laudo TÃ©cnico</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="assets/branding.css">

  <!-- Biblioteca para gerar PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

  <script src="ltcat.js" defer></script>
</head>

<body>

<nav class="nav">
  <div class="wrap">
    <div class="logo">
      <img src="assets/datainsight.jpg" alt="Logo">
      <span>LTCAT â€” Laudo TÃ©cnico de CondiÃ§Ãµes Ambientais</span>
    </div>

    <div style="margin-left:auto; display:flex; gap:8px;">
      <a class="btn secondary" href="dashboard.html">ğŸ  Dashboard</a>
      <a class="btn secondary" href="pgr.html">ğŸ“ PGR / NR-01</a>
      <a class="btn secondary" href="pcmso.html">âš•ï¸ PCMSO / ASO</a>
      <a class="btn secondary" href="nr17.html">ğŸª‘ NR-17</a>
      <a class="btn active" href="ltcat.html">ğŸ“„ LTCAT</a>
      <button onclick="logout()" class="btn danger">Sair</button>
    </div>
  </div>
</nav>

<div class="container">

  <!-- FORMULÃRIO LTCAT -->
  <div class="card">
    <h2>ğŸ“„ Registro de InformaÃ§Ãµes para LTCAT</h2>
    <p class="section-subtitle">
      Estruture as informaÃ§Ãµes essenciais para elaboraÃ§Ã£o do LTCAT: agente nocivo, exposiÃ§Ã£o e enquadramento previdenciÃ¡rio.
    </p>

    <div class="form-grid mt-3">

      <label>Empresa
        <input type="text" id="empresa" placeholder="Ex: MetalÃºrgica Alfa LTDA">
      </label>

      <label>CNPJ
        <input type="text" id="cnpj" placeholder="00.000.000/0000-00">
      </label>

      <label>Setor
        <input type="text" id="setor" placeholder="Ex: Caldeiraria / Oficina / EscritÃ³rio">
      </label>

      <label>FunÃ§Ã£o
        <input type="text" id="funcao" placeholder="Ex: Soldador / Operador de Prensa">
      </label>

      <label>GHE (opcional)
        <input type="text" id="ghe" placeholder="Ex: GHE 01 â€“ Soldagem">
      </label>

      <label>Agente Nocivo
        <input type="text" id="agente" placeholder="Ex: RuÃ­do, Benzeno, Calor, SÃ­lica...">
      </label>

      <label>ClassificaÃ§Ã£o do Agente
        <select id="classificacao">
          <option value="FÃ­sico">FÃ­sico</option>
          <option value="QuÃ­mico">QuÃ­mico</option>
          <option value="BiolÃ³gico">BiolÃ³gico</option>
          <option value="Misto">Misto</option>
        </select>
      </label>

      <label>Fonte Geradora
        <input type="text" id="fonte" placeholder="Ex: Prensa hidrÃ¡ulica, forno, produto quÃ­mico...">
      </label>

      <label>Meio de PropagaÃ§Ã£o
        <input type="text" id="meio" placeholder="Ex: Ar, contato direto, superfÃ­cies...">
      </label>

      <label>Intensidade / ConcentraÃ§Ã£o
        <input type="text" id="intensidade" placeholder="Ex: 92 dB(A), 15 ppm, 28 ÂºC IBUTG">
      </label>

      <label>Unidade
        <input type="text" id="unidade" placeholder="Ex: dB(A), ppm, ÂºC, mg/mÂ³">
      </label>

      <label>Jornada diÃ¡ria (h)
        <input type="number" id="jornada" min="0" step="0.25" placeholder="Ex: 8">
      </label>

      <label>Dias por semana
        <input type="number" id="diasSemana" min="1" max="7" placeholder="Ex: 5">
      </label>

      <label>Tempo de exposiÃ§Ã£o (anos)
        <input type="number" id="tempoAnos" min="0" step="0.5" placeholder="Ex: 12">
      </label>

      <label>EPC / EPI eficaz?
        <select id="epiEficaz">
          <option value="Sim">Sim</option>
          <option value="NÃ£o">NÃ£o</option>
          <option value="Parcial">Parcial</option>
        </select>
      </label>

      <label>Enquadramento PrevidenciÃ¡rio
        <select id="enquadramento">
          <option value="Sem enquadramento">Sem enquadramento</option>
          <option value="Especial â€“ 15 anos">Especial â€“ 15 anos</option>
          <option value="Especial â€“ 20 anos">Especial â€“ 20 anos</option>
          <option value="Especial â€“ 25 anos">Especial â€“ 25 anos</option>
        </select>
      </label>

      <label>Data da AvaliaÃ§Ã£o / MediÃ§Ã£o
        <input type="date" id="data">
      </label>

      <label>ResponsÃ¡vel TÃ©cnico
        <input type="text" id="responsavel" placeholder="Nome / Registro profissional">
      </label>

      <label style="grid-column: 1 / -1;">ObservaÃ§Ãµes (opcional)
        <textarea id="observacoes" rows="3" placeholder="Descrever metodologia utilizada, normas tÃ©cnicas, condiÃ§Ãµes atÃ­picas, recomendaÃ§Ãµes..."></textarea>
      </label>

    </div>

    <div class="actions-row">
      <button class="btn primary" onclick="salvarLTCAT()">ğŸ’¾ Salvar Registro</button>
      <button class="btn secondary" onclick="limparLTCAT()">ğŸ§¹ Limpar</button>
      <button class="btn secondary" onclick="imprimirUltimoLTCAT()">ğŸ–¨ï¸ Imprimir Ãºltimo</button>
      <button class="btn secondary" onclick="exportarPDFUltimoLTCAT()">ğŸ“„ Exportar PDF (Ãºltimo)</button>
    </div>
  </div>

  <!-- LISTA DE REGISTROS -->
  <div class="card">
    <h2>ğŸ“š Registros para LTCAT</h2>

    <div class="actions-row">
      <input
        type="text"
        id="filtroLTCAT"
        placeholder="Filtrar por empresa, setor, funÃ§Ã£o ou agente..."
        oninput="filtrarLTCAT()"
        style="flex:1; max-width:360px;"
      >
    </div>

    <table class="table" id="tabelaLTCAT">
      <thead>
        <tr>
          <th>Data</th>
          <th>Empresa</th>
          <th>Setor</th>
          <th>FunÃ§Ã£o</th>
          <th>Agente</th>
          <th>ClassificaÃ§Ã£o</th>
          <th>Enquadramento</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- ÃREA OCULTA PARA RELATÃ“RIO PDF -->
  <div id="areaRelatorioLTCAT" style="display:none;">
    <div id="conteudoRelatorioLTCAT" style="padding:20px; font-family:system-ui;"></div>
  </div>

</div>

<script>
function logout() {
  localStorage.clear();
  window.location.href = "index.html";
}
</script>

</body>
</html>
